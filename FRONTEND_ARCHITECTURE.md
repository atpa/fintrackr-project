# FinTrackr Frontend Architecture Guide

> **Version**: 2.0  
> **Status**: Modern, Modular, Accessible  
> **Last Updated**: November 2025

## ğŸ“ Overview

FinTrackr frontend is a vanilla ES6 JavaScript application with modern CSS architecture. It uses static HTML served directly from `public/` directory with modular JavaScript bundles generated by Vite.

**Key Principles**:
- Progressive enhancement
- Accessibility-first (WCAG 2.1 AA)
- Mobile-first responsive design
- Modular component architecture
- No external frontend frameworks

## ğŸ¯ Project Structure

```
frontend/
â”œâ”€â”€ pages/                           # Page-specific logic (entry points)
â”‚   â”œâ”€â”€ dashboard.js                 # Dashboard page
â”‚   â”œâ”€â”€ transactions.js              # Transactions management
â”‚   â”œâ”€â”€ budgets.js                   # Budget tracking
â”‚   â”œâ”€â”€ reports.js                   # Financial reports
â”‚   â”œâ”€â”€ settings.js                  # User settings
â”‚   â””â”€â”€ [other pages]
â”‚
â””â”€â”€ modules/                         # Shared utilities & services
    â”œâ”€â”€ auth.js                      # Authentication state
    â”œâ”€â”€ api.js                       # HTTP client
    â”œâ”€â”€ navigation.js                # Sidebar management
    â””â”€â”€ profile.js                   # User preferences

public/
â”œâ”€â”€ *.html                           # Static pages (no build needed)
â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”œâ”€â”€ transactions.html
â”‚   â”œâ”€â”€ reports.html
â”‚   â”œâ”€â”€ settings.html
â”‚   â””â”€â”€ [other pages]
â”‚
â”œâ”€â”€ js/                              # Compiled bundles (generated by Vite)
â”‚   â”œâ”€â”€ app.js                       # Main app bundle
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ auth.js                  # Auth utilities
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ dashboard.js
â”‚       â””â”€â”€ [other page bundles]
â”‚
â””â”€â”€ css/
    â”œâ”€â”€ style.css                    # Main stylesheet (~2000 lines)
    â”œâ”€â”€ design-system.css            # Component styles
    â”œâ”€â”€ tokens.css                   # Design tokens
    â”œâ”€â”€ transitions.css              # Animations
    â”œâ”€â”€ icons.css                    # Icon styles
    â””â”€â”€ components/                  # Component-specific CSS (optional)
```

## ğŸ¨ Design System

### Color Palette

**Brand Colors**:
```css
--primary: #6366f1           /* Primary action, links */
--primary-dark: #4f46e5      /* Hover state */
--primary-light: #818cf8     /* Disabled, subtle */
--secondary: #ec4899         /* Secondary accent */
```

**Semantic Colors**:
```css
--success: #10b981           /* Success, income */
--warning: #f59e0b           /* Warnings, caution */
--error: #ef4444             /* Errors, expenses */
--info: #3b82f6              /* Information */
```

**Neutral Colors** (Light Mode):
```css
--bg-primary: #ffffff        /* Main background */
--bg-secondary: #f9fafb      /* Card, section background */
--bg-tertiary: #f3f4f6       /* Subtle background */

--text-primary: #111827      /* Headings, primary text */
--text-secondary: #6b7280    /* Secondary text */
--text-tertiary: #9ca3af     /* Tertiary text, disabled */

--border-color: #e5e7eb      /* Border lines */
--divider: #e5e7eb           /* Section dividers */
```

**Dark Mode**: Uses `[data-theme="dark"]` selector with inverted values.

### Spacing Scale (4px Grid)

```css
--space-xs:   0.25rem  /* 4px */
--space-sm:   0.5rem   /* 8px */
--space-md:   1rem     /* 16px */
--space-lg:   1.5rem   /* 24px */
--space-xl:   2rem     /* 32px */
--space-2xl:  3rem     /* 48px */
--space-3xl:  4rem     /* 64px */
```

### Typography

**Font Stack**:
```css
--font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
--font-mono: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', monospace;
```

**Size Scale**:
```css
--font-size-xs:  0.75rem    /* 12px */
--font-size-sm:  0.875rem   /* 14px */
--font-size-md:  1rem       /* 16px */
--font-size-lg:  1.125rem   /* 18px */
--font-size-xl:  1.25rem    /* 20px */
--font-size-2xl: 1.5rem     /* 24px */
--font-size-3xl: 1.875rem   /* 30px */
--font-size-4xl: 2.25rem    /* 36px */
```

### Border Radius

```css
--radius-sm:  0.375rem  /* 6px */
--radius-md:  0.5rem    /* 8px */
--radius-lg:  0.75rem   /* 12px */
--radius-xl:  1rem      /* 16px */
--radius-2xl: 1.5rem    /* 24px */
--radius-full: 9999px   /* Full circle */
```

### Shadows

```css
--shadow-xs:  0 1px 2px 0 rgba(0, 0, 0, 0.05);
--shadow-sm:  0 1px 3px 0 rgba(0, 0, 0, 0.1);
--shadow-md:  0 4px 6px -1px rgba(0, 0, 0, 0.1);
--shadow-lg:  0 10px 15px -3px rgba(0, 0, 0, 0.1);
--shadow-xl:  0 20px 25px -5px rgba(0, 0, 0, 0.1);
```

## ğŸ“¦ Core Components

### Layout Components

#### Sidebar
```html
<aside class="sidebar" id="sidebar" role="navigation" aria-label="Ğ‘Ğ¾ĞºĞ¾Ğ²Ğ°Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ">
  <div class="sidebar-top">
    <div class="sidebar-header">
      <a href="dashboard.html" class="logo" aria-label="Logo">
        <!-- SVG logo -->
      </a>
    </div>
  </div>
  
  <div class="sidebar-scroll">
    <nav class="sidebar-nav" aria-label="Main menu">
      <div class="nav-section">
        <h3 class="nav-section-title">Section Title</h3>
        <ul class="nav-list">
          <li class="nav-item">
            <a href="page.html" class="nav-link">
              <span class="nav-icon">ğŸ </span>
              <span class="nav-label">Label</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</aside>

<div class="sidebar-backdrop" id="sidebarBackdrop" aria-hidden="true"></div>
```

#### Header
```html
<header role="banner">
  <button class="burger" aria-label="Open menu" aria-expanded="false" aria-controls="sidebar">
    <span></span><span></span><span></span>
  </button>
</header>
```

#### Main Content
```html
<main id="main-content" role="main">
  <!-- Page content -->
</main>
```

### Button Component

**Variants**:
```html
<!-- Primary -->
<button class="btn btn-primary">Primary Action</button>

<!-- Secondary -->
<button class="btn btn-secondary">Secondary Action</button>

<!-- Ghost (outline) -->
<button class="btn btn-ghost">Ghost Action</button>

<!-- Pill shape -->
<button class="btn btn-pill">Pill Button</button>

<!-- Disabled -->
<button class="btn btn-primary" disabled>Disabled</button>
```

**Styling**:
- Default padding: `--space-3` (top/bottom) x `--space-4` (left/right)
- Focus: `:focus-visible` with `outline: 2px solid var(--primary)`
- Hover: Slight background/shadow change
- Disabled: `opacity: 0.5`, `cursor: not-allowed`

### Card Component

**Basic Card**:
```html
<div class="card">
  <h2>Card Title</h2>
  <p>Card content</p>
</div>
```

**Stat Card**:
```html
<div class="stat-card stat-card--balance">
  <span class="stat-card-label">Label</span>
  <div class="stat-card-value">$1,234.56</div>
  <p class="stat-card-note">Compared to last month</p>
</div>
```

**Variants**:
- `.stat-card--balance` - Gradient background
- `.stat-card--income` - Success color
- `.stat-card--expense` - Error color

### Form Components

**Form Field**:
```html
<label class="form-field">
  <span class="form-label">Label</span>
  <input type="text" class="form-input" placeholder="Placeholder" required aria-required="true" />
  <span class="form-error" id="error-msg" aria-live="polite"></span>
</label>
```

**Select**:
```html
<label class="form-field">
  <span class="form-label">Select Option</span>
  <select class="form-select" required>
    <option value="">Choose...</option>
    <option value="1">Option 1</option>
  </select>
</label>
```

**Checkbox**:
```html
<label class="checkbox-label">
  <input type="checkbox" class="checkbox-input" />
  <span class="checkbox-text">Label text</span>
</label>
```

**Validation States**:
- `.form-input--error` - Error state (red border)
- `.form-input--success` - Success state (green border)
- `:disabled` - Disabled state

### Table Component

```html
<div class="table-container">
  <table class="table">
    <thead>
      <tr>
        <th>Column 1</th>
        <th>Column 2</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Data 1</td>
        <td>Data 2</td>
      </tr>
    </tbody>
  </table>
</div>
```

### Modal Component

```html
<div class="modal-backdrop" id="modal-id" role="presentation">
  <div class="modal" role="dialog" aria-labelledby="modal-title" aria-modal="true">
    <div class="modal-header">
      <h2 id="modal-title">Modal Title</h2>
      <button class="modal-close" aria-label="Close">Ã—</button>
    </div>
    <div class="modal-body">
      Content here
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary">Cancel</button>
      <button class="btn btn-primary">Confirm</button>
    </div>
  </div>
</div>
```

## ğŸš€ JavaScript Architecture

### Module: auth.js

**Purpose**: Authentication state management

**Key Functions**:
```javascript
Auth.isLoggedIn()                // Returns boolean
Auth.getUser()                   // Returns user object from localStorage
Auth.setUser(userData)           // Saves user to localStorage
Auth.logout()                    // Clears auth state
Auth.onAuthStateChange(callback) // Listen for auth changes
```

**Usage**:
```javascript
if (Auth.isLoggedIn()) {
  const user = Auth.getUser();
  console.log(user.name, user.email);
}
```

### Module: api.js

**Purpose**: HTTP client wrapper

**Key Functions**:
```javascript
fetchData(endpoint)              // GET request
postData(endpoint, body)         // POST request
putData(endpoint, body)          // PUT request
deleteData(endpoint)             // DELETE request
```

**Usage**:
```javascript
const accounts = await fetchData('/api/accounts');
const result = await postData('/api/transactions', { amount: 100 });
```

### Module: navigation.js

**Purpose**: Sidebar management and navigation

**Key Functions**:
```javascript
initNavigation()                 // Initialize sidebar
toggleSidebar()                  // Toggle sidebar visibility
setActivePage(pageName)          // Highlight current page
buildSidebarHTML()               // Generate sidebar HTML
```

**Usage**:
```javascript
document.addEventListener('DOMContentLoaded', () => {
  initNavigation();
  setActivePage('dashboard');
});
```

### Module: profile.js

**Purpose**: User preferences (theme, currency, language)

**Key Functions**:
```javascript
Profile.getTheme()               // Returns 'light' or 'dark'
Profile.setTheme(theme)          // Sets theme
Profile.getCurrency()            // Returns user's preferred currency
Profile.setCurrency(code)        // Sets currency
Profile.getLanguage()            // Returns language code
```

**Usage**:
```javascript
if (Profile.getTheme() === 'dark') {
  document.documentElement.setAttribute('data-theme', 'dark');
}
```

## ğŸ¯ Page Structure Template

Every page should follow this structure for consistency:

```html
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FinTrackr â€“ Page Title</title>
    <!-- CSS in order: tokens â†’ style â†’ components â†’ icons â†’ transitions -->
    <link rel="stylesheet" href="css/tokens.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/design-system.css" />
    <link rel="stylesheet" href="css/icons.css" />
    <link rel="stylesheet" href="css/transitions.css" />
  </head>
  <body class="workspace-page" data-page-title="Title" data-page-subtitle="Subtitle">
    <!-- Skip to main content link (hidden, for a11y) -->
    <a href="#main-content" class="visually-hidden" tabindex="1">
      ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼Ñƒ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğ¼Ñƒ
    </a>
    
    <!-- Header with burger menu -->
    <header role="banner">
      <button class="burger" aria-label="Open menu" aria-expanded="false" aria-controls="sidebar">
        <span></span><span></span><span></span>
      </button>
    </header>

    <!-- Sidebar navigation -->
    <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
      <!-- Sidebar content -->
    </aside>

    <!-- Sidebar backdrop for mobile -->
    <div class="sidebar-backdrop" id="sidebarBackdrop" aria-hidden="true"></div>

    <!-- Main content -->
    <main id="main-content" role="main">
      <!-- Page content -->
    </main>

    <!-- Scripts: defer loading -->
    <script defer src="js/utils/auth.js"></script>
    <script defer src="js/app.js"></script>
    <script defer src="js/pages/[page-name].js"></script>
  </body>
</html>
```

## â™¿ Accessibility Standards

### WCAG 2.1 Level AA

**Semantic HTML**:
- Use `<header>`, `<nav>`, `<main>`, `<aside>`, `<article>` appropriately
- Use `<button>` for actions, `<a>` for navigation
- Use `<label>` for form controls

**ARIA Attributes**:
- `role="banner"` on header
- `role="navigation"` on nav/sidebar
- `role="main"` on main content
- `aria-label` for icon-only buttons
- `aria-expanded` for toggles
- `aria-live="polite"` for status updates
- `aria-invalid` for form validation

**Keyboard Navigation**:
- `:focus-visible` outlines on all interactive elements
- `tabindex="1"` for skip-to-content link
- Tab order follows visual order
- Escape key closes modals

**Color Contrast**:
- Minimum 4.5:1 for normal text
- Minimum 3:1 for large text (18px+)
- Don't rely on color alone

**Motion**:
- Respect `@media (prefers-reduced-motion: reduce)`
- Animations are 300-600ms
- No auto-playing videos or animations

### Focus Styles

```css
:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;  /* Hide outline for mouse, keep for keyboard */
}
```

## ğŸ“± Responsive Design

### Breakpoints

```css
/* Mobile: 320px - 640px */
@media (max-width: 640px) { ... }

/* Tablet: 641px - 1024px */
@media (min-width: 641px) and (max-width: 1024px) { ... }

/* Desktop: 1025px + */
@media (min-width: 1025px) { ... }
```

### Mobile-First CSS

```css
/* Default (mobile) */
.sidebar { position: fixed; left: -100%; }

/* Tablet and up */
@media (min-width: 768px) {
  .sidebar { position: static; }
}

/* Desktop and up */
@media (min-width: 1280px) {
  .sidebar { width: 280px; }
}
```

## ğŸ¬ Animations & Transitions

### Utility Classes

```css
.fade-in           /* Fade in on load */
.slide-in-up       /* Slide up from bottom */
.bounce            /* Bounce animation */
.shake             /* Shake for errors */

.page-transition-fade-enter    /* Page fade in */
.page-transition-slide-enter   /* Page slide in */

.toast-enter       /* Toast slide in from right */
.list-item-enter   /* List item fade in */

.skeleton          /* Loading skeleton pulse */
.spinner           /* Loading spinner */
```

## ğŸ§ª Testing Page

```html
<!-- Navigate to http://localhost:3000/test-auth.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Auth Test</title>
  <script src="js/utils/auth.js"></script>
</head>
<body>
  <h1>Auth Module Test</h1>
  <pre id="output"></pre>
  <script>
    const output = document.getElementById('output');
    output.textContent = JSON.stringify({
      isLoggedIn: Auth.isLoggedIn(),
      user: Auth.getUser()
    }, null, 2);
  </script>
</body>
</html>
```

## ğŸš€ Building & Deployment

### Build Frontend

```bash
npm install          # Install dependencies
npx vite build       # Build frontend bundles
```

### Development

```bash
npm start            # Start server + watch CSS/JS changes
# Browse to http://localhost:3000
```

### Production

```bash
npm run build        # Build all
npm run build:prod   # Production build with minification
```

## ğŸ”— Useful Links

- **CSS Variables**: Defined in `tokens.css` and `design-system.css`
- **Typography Scale**: Based on 1.125 ratio (major second)
- **Color Palette**: Inspired by Revolut/Monzo fintech design
- **Accessibility**: WCAG 2.1 AA compliant
- **Performance**: No external dependencies (except system fonts)

---

**Maintained by**: FinTrackr Development Team  
**License**: See LICENSE file
