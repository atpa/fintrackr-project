let h=!1,d=null;function u(){return h?Promise.resolve():d||(d=new Promise((e,o)=>{if(window.ApexCharts){h=!0,console.log("âœ… ApexCharts already loaded"),e();return}console.log("â³ Loading ApexCharts from CDN...");const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js",a.onload=()=>{h=!0,console.log("âœ… ApexCharts loaded successfully"),e()},a.onerror=n=>{console.error("âŒ Failed to load ApexCharts:",n),o(n)},document.head.appendChild(a)}),d)}function p(){const e=getComputedStyle(document.documentElement);return{primary:e.getPropertyValue("--primary").trim()||"#6366f1",primaryLight:e.getPropertyValue("--primary-light").trim()||"#818cf8",accent:e.getPropertyValue("--accent").trim()||"#10b981",danger:e.getPropertyValue("--danger").trim()||"#ef4444",text:e.getPropertyValue("--text").trim()||"#1a202c",textSecondary:e.getPropertyValue("--text-secondary").trim()||"#64748b",bgBase:e.getPropertyValue("--bg-base").trim()||"#ffffff",bgElevated:e.getPropertyValue("--bg-elevated").trim()||"#f8fafc",borderColor:e.getPropertyValue("--border-color").trim()||"#e2e8f0"}}function i(){const e=p(),o=document.documentElement.classList.contains("dark")||document.body.classList.contains("dark");return{chart:{fontFamily:"Inter, system-ui, sans-serif",background:"transparent",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},theme:{mode:o?"dark":"light"},colors:[e.primary,e.accent,e.danger,e.primaryLight,"#f59e0b","#8b5cf6","#ec4899","#06b6d4"],dataLabels:{enabled:!1},grid:{borderColor:e.borderColor,strokeDashArray:4,padding:{top:0,right:10,bottom:0,left:10}},tooltip:{theme:o?"dark":"light",style:{fontSize:"14px"}}}}async function y(e,o,a,n="USD"){console.log(`ðŸ“Š Rendering bar chart: ${e}`,{labels:o,values:a,currency:n}),await u();const r=document.getElementById(e);if(!r){console.error(`âŒ Element not found: ${e}`);return}console.log(`âœ… Element found: ${e}`,r),r.innerHTML="";const t=p(),c={...i(),chart:{...i().chart,type:"bar",height:350},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"60%",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:s=>s.toFixed(0),offsetY:-20,style:{fontSize:"12px",colors:[t.text]}},series:[{name:"Ð Ð°ÑÑ…Ð¾Ð´",data:a}],xaxis:{categories:o,labels:{style:{colors:t.textSecondary,fontSize:"12px"},rotate:o.length>5?-45:0,trim:!0,maxHeight:100}},yaxis:{labels:{style:{colors:t.textSecondary},formatter:s=>s.toFixed(0)+" "+n}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:[t.primaryLight],inverseColors:!1,opacityFrom:1,opacityTo:.85,stops:[0,100]}}},l=new ApexCharts(r,c);return l.render(),l}async function x(e,o,a,n="USD"){console.log(`ðŸ© Rendering donut chart: ${e}`,{labels:o,values:a,currency:n}),await u();const r=document.getElementById(e);if(!r){console.error(`âŒ Element not found: ${e}`);return}console.log(`âœ… Element found: ${e}`,r),r.innerHTML="";const t=p(),c={...i(),chart:{...i().chart,type:"donut",height:350},series:a,labels:o,plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",color:t.textSecondary},value:{show:!0,fontSize:"24px",fontWeight:600,color:t.text,formatter:s=>parseFloat(s).toFixed(0)+" "+n},total:{show:!0,label:"Ð’ÑÐµÐ³Ð¾",fontSize:"14px",color:t.textSecondary,formatter:s=>s.globals.seriesTotals.reduce((f,m)=>f+m,0).toFixed(0)+" "+n}}}}},legend:{position:"bottom",horizontalAlign:"center",fontSize:"13px",labels:{colors:t.text},markers:{width:12,height:12,radius:3}},stroke:{width:2,colors:[t.bgBase]},responsive:[{breakpoint:768,options:{chart:{height:300},legend:{position:"bottom"}}}]},l=new ApexCharts(r,c);return l.render(),l}async function b(e,o,a,n="USD"){await u();const r=document.getElementById(e);if(!r)return;r.innerHTML="";const t=p(),c={...i(),chart:{...i().chart,type:"bar",height:350},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"55%"}},dataLabels:{enabled:!0,formatter:s=>s.toFixed(0),offsetY:-20,style:{fontSize:"12px",colors:[t.text]}},series:a,xaxis:{categories:o,labels:{style:{colors:t.textSecondary,fontSize:"12px"}}},yaxis:{labels:{style:{colors:t.textSecondary},formatter:s=>s.toFixed(0)+" "+n}},legend:{position:"top",horizontalAlign:"left",fontSize:"13px",labels:{colors:t.text},markers:{width:12,height:12,radius:3}},fill:{opacity:1}},l=new ApexCharts(r,c);return l.render(),l}export{x as a,b,y as r};
