let m=!1,d=null;function u(){return m?Promise.resolve():d||(d=new Promise((e,r)=>{if(window.ApexCharts){m=!0,e();return}const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js",n.onload=()=>{m=!0,e()},n.onerror=r,document.head.appendChild(n)}),d)}function p(){const e=getComputedStyle(document.documentElement);return{primary:e.getPropertyValue("--primary").trim()||"#6366f1",primaryLight:e.getPropertyValue("--primary-light").trim()||"#818cf8",accent:e.getPropertyValue("--accent").trim()||"#10b981",danger:e.getPropertyValue("--danger").trim()||"#ef4444",text:e.getPropertyValue("--text").trim()||"#1a202c",textSecondary:e.getPropertyValue("--text-secondary").trim()||"#64748b",bgBase:e.getPropertyValue("--bg-base").trim()||"#ffffff",bgElevated:e.getPropertyValue("--bg-elevated").trim()||"#f8fafc",borderColor:e.getPropertyValue("--border-color").trim()||"#e2e8f0"}}function l(){const e=p(),r=document.documentElement.classList.contains("dark")||document.body.classList.contains("dark");return{chart:{fontFamily:"Inter, system-ui, sans-serif",background:"transparent",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},theme:{mode:r?"dark":"light"},colors:[e.primary,e.accent,e.danger,e.primaryLight,"#f59e0b","#8b5cf6","#ec4899","#06b6d4"],dataLabels:{enabled:!1},grid:{borderColor:e.borderColor,strokeDashArray:4,padding:{top:0,right:10,bottom:0,left:10}},tooltip:{theme:r?"dark":"light",style:{fontSize:"14px"}}}}async function g(e,r,n,i="USD"){await u();const o=document.getElementById(e);if(!o)return;o.innerHTML="";const t=p(),c={...l(),chart:{...l().chart,type:"bar",height:350},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"60%",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:a=>a.toFixed(0),offsetY:-20,style:{fontSize:"12px",colors:[t.text]}},series:[{name:"Расход",data:n}],xaxis:{categories:r,labels:{style:{colors:t.textSecondary,fontSize:"12px"},rotate:r.length>5?-45:0,trim:!0,maxHeight:100}},yaxis:{labels:{style:{colors:t.textSecondary},formatter:a=>a.toFixed(0)+" "+i}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:[t.primaryLight],inverseColors:!1,opacityFrom:1,opacityTo:.85,stops:[0,100]}}},s=new ApexCharts(o,c);return s.render(),s}async function b(e,r,n,i="USD"){await u();const o=document.getElementById(e);if(!o)return;o.innerHTML="";const t=p(),c={...l(),chart:{...l().chart,type:"donut",height:350},series:n,labels:r,plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",color:t.textSecondary},value:{show:!0,fontSize:"24px",fontWeight:600,color:t.text,formatter:a=>parseFloat(a).toFixed(0)+" "+i},total:{show:!0,label:"Всего",fontSize:"14px",color:t.textSecondary,formatter:a=>a.globals.seriesTotals.reduce((h,f)=>h+f,0).toFixed(0)+" "+i}}}}},legend:{position:"bottom",horizontalAlign:"center",fontSize:"13px",labels:{colors:t.text},markers:{width:12,height:12,radius:3}},stroke:{width:2,colors:[t.bgBase]},responsive:[{breakpoint:768,options:{chart:{height:300},legend:{position:"bottom"}}}]},s=new ApexCharts(o,c);return s.render(),s}async function x(e,r,n,i="USD"){await u();const o=document.getElementById(e);if(!o)return;o.innerHTML="";const t=p(),c={...l(),chart:{...l().chart,type:"bar",height:350},plotOptions:{bar:{borderRadius:8,horizontal:!1,columnWidth:"55%"}},dataLabels:{enabled:!0,formatter:a=>a.toFixed(0),offsetY:-20,style:{fontSize:"12px",colors:[t.text]}},series:n,xaxis:{categories:r,labels:{style:{colors:t.textSecondary,fontSize:"12px"}}},yaxis:{labels:{style:{colors:t.textSecondary},formatter:a=>a.toFixed(0)+" "+i}},legend:{position:"top",horizontalAlign:"left",fontSize:"13px",labels:{colors:t.text},markers:{width:12,height:12,radius:3}},fill:{opacity:1}},s=new ApexCharts(o,c);return s.render(),s}export{b as a,x as b,g as r};
