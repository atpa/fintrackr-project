import{i as m,p as c,A as i}from"./profile-DStBtrFs.js";m({requireAuth:!1});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("loginForm");t&&t.addEventListener("submit",async l=>{var o,r,s;l.preventDefault();const a=(r=(o=document.getElementById("loginEmail"))==null?void 0:o.value)==null?void 0:r.trim(),n=(s=document.getElementById("loginPassword"))==null?void 0:s.value;if(!a||!n){alert("Enter both email and password.");return}try{const e=await c("/api/login",{email:a,password:n},{csrf:!1}),d=(e==null?void 0:e.user)||e;if(!i.login(d)){alert("Failed to save session data.");return}await i.syncSession(!0).catch(()=>null),window.location.href="dashboard.html"}catch(e){alert(e.message||"Login failed.")}})});
