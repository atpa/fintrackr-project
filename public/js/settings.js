import{i as p}from"./navigation-BDLIzq93.js";import{l as f,s as u,i as g,a as v}from"./profile-BEROGLl0.js";function C({formSelector:e="#notifyForm",storageKey:c="settings",onSuccess:l,onError:a}={}){const s=()=>{const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;const r=n.querySelector("#notifyEmail"),i=n.querySelector("#notifyTelegram"),o=n.querySelector("#notifyPush"),t=f(c),m=t.notifications||{};r&&(r.checked=!!m.email),i&&(i.checked=!!m.telegram),o&&(o.checked=!!m.push),n.addEventListener("submit",y=>{y.preventDefault(),t.notifications={email:r?!!r.checked:!1,telegram:i?!!i.checked:!1,push:o?!!o.checked:!1},u(t,c)?typeof l=="function"?l(t.notifications):alert("Настройки уведомлений сохранены"):typeof a=="function"?a():alert("Не удалось сохранить настройки уведомлений")})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s,{once:!0}):s()}p();g();function d(){let e=f();v({settings:e});const c=document.getElementById("profileName"),l=document.getElementById("profileCurrency"),a=document.getElementById("profileTimezone"),s=document.getElementById("reportCurrencySelect"),n=document.getElementById("balanceCurrencySelect"),r=document.getElementById("profileForm");r&&r.addEventListener("submit",t=>{t.preventDefault(),e={...e,name:c?c.value.trim():e.name,currency:l?l.value:e.currency,timezone:a?a.value:e.timezone},u(e)?alert("Профиль сохранён"):alert("Не удалось сохранить настройки")});const i=document.getElementById("reportCurrencyForm");i&&i.addEventListener("submit",t=>{t.preventDefault(),e={...e,reportCurrency:s?s.value:e.reportCurrency},u(e)?alert("Валюта отчётов сохранена"):alert("Не удалось сохранить валюту отчётов")});const o=document.getElementById("balanceCurrencyForm");o&&o.addEventListener("submit",t=>{t.preventDefault(),e={...e,balanceCurrency:n?n.value:e.balanceCurrency},u(e)?alert("Валюта баланса сохранена"):alert("Не удалось сохранить валюту баланса")}),C()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();
