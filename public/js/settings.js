import{i as e}from"./chunks/navigation-BNxy9xC7.js";import{l as t,s as n,i as r,a as o}from"./chunks/profile-BfLkpaKJ.js";function c(){let e=t();o({settings:e});const r=document.getElementById("profileName"),c=document.getElementById("profileCurrency"),a=document.getElementById("profileTimezone"),u=document.getElementById("reportCurrencySelect"),i=document.getElementById("balanceCurrencySelect"),l=document.getElementById("profileForm");l&&l.addEventListener("submit",t=>{t.preventDefault(),e={...e,name:r?r.value.trim():e.name,currency:c?c.value:e.currency,timezone:a?a.value:e.timezone},n(e)?alert("Профиль сохранён"):alert("Не удалось сохранить настройки")});const d=document.getElementById("reportCurrencyForm");d&&d.addEventListener("submit",t=>{t.preventDefault(),e={...e,reportCurrency:u?u.value:e.reportCurrency},n(e)?alert("Валюта отчётов сохранена"):alert("Не удалось сохранить валюту отчётов")});const m=document.getElementById("balanceCurrencyForm");m&&m.addEventListener("submit",t=>{t.preventDefault(),e={...e,balanceCurrency:i?i.value:e.balanceCurrency},n(e)?alert("Валюта баланса сохранена"):alert("Не удалось сохранить валюту баланса")}),function({formSelector:e="#notifyForm",storageKey:r="settings",onSuccess:o,onError:c}={}){const a=()=>{const a="string"==typeof e?document.querySelector(e):e;if(!a)return;const u=a.querySelector("#notifyEmail"),i=a.querySelector("#notifyTelegram"),l=a.querySelector("#notifyPush"),d=t(r),m=d.notifications||{};u&&(u.checked=!!m.email),i&&(i.checked=!!m.telegram),l&&(l.checked=!!m.push),a.addEventListener("submit",e=>{e.preventDefault(),d.notifications={email:!!u&&!!u.checked,telegram:!!i&&!!i.checked,push:!!l&&!!l.checked},n(d,r)?"function"==typeof o?o(d.notifications):alert("Настройки уведомлений сохранены"):"function"==typeof c?c():alert("Не удалось сохранить настройки уведомлений")})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a,{once:!0}):a()}()}e(),r(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c();
