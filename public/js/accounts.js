import{f as u}from"./api-D6s1A7e-.js";import{i as m}from"./navigation-BDLIzq93.js";import{i as l}from"./profile-BEROGLl0.js";m();l();function s(a,n){n.innerHTML="",a.forEach(e=>{const o=document.createElement("tr"),r=document.createElement("td");r.textContent=e.name;const t=document.createElement("td");t.textContent=e.currency;const c=document.createElement("td");c.textContent=Number(e.balance).toFixed(2),c.className=e.balance<0?"status-expense":"status-income",o.append(r,t,c),n.appendChild(o)})}async function d(){const a=document.querySelector("#accountsTable tbody");if(!a)return;let n=await u("/api/accounts");s(n,a);const e=document.getElementById("addAccountForm");e&&e.addEventListener("submit",async o=>{o.preventDefault();const r={name:document.getElementById("accName").value,currency:document.getElementById("accCurrency").value,balance:parseFloat(document.getElementById("accBalance").value)||0};try{const t=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){const i=await t.json();alert("Ошибка: "+(i.error||"не удалось добавить счёт"));return}const c=await t.json();n.push(c),s(n,a),e.reset()}catch(t){console.error(t),alert("Ошибка сети")}})}document.readyState!=="loading"?d():document.addEventListener("DOMContentLoaded",d);
