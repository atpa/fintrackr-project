import{g as e}from"./sidebar.js";import{f as t}from"./cardAccount.js";import{o as n,c as a}from"./chunks/ModalBase-nBdty8ot.js";import{a as o,t as l}from"./chunks/Toast-Cw3r9-oW.js";import{s as r,a as c,h as s}from"./chunks/SkeletonLoader-CzourGF4.js";const i={dashboard:"–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è",transactions:"–û–ø–µ—Ä–∞—Ü–∏–∏",accounts:"–°—á–µ—Ç–∞",categories:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",budgets:"–ë—é–¥–∂–µ—Ç—ã",goals:"–¶–µ–ª–∏",planned:"–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ",subscriptions:"–ü–æ–¥–ø–∏—Å–∫–∏",recurring:"–†–µ–≥—É–ª—è—Ä–Ω—ã–µ",reports:"–û—Ç—á—ë—Ç—ã",forecast:"–ü—Ä–æ–≥–Ω–æ–∑",rules:"–ü—Ä–∞–≤–∏–ª–∞",converter:"–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç",sync:"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è",settings:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏",education:"–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å",premium:"Premium"};function d(t=null,n={}){const a=window.location.pathname.replace(/^\//,"").replace(/\.html$/,"")||"dashboard",o=localStorage.getItem("fintrackr-theme")||"light";e.state.theme=o,document.documentElement.setAttribute("data-theme",o);const l=function(t={}){const{pageId:n="dashboard",onToggleSidebar:a=null,onThemeToggle:o=null,onLogout:l=null}=t,r=e.state.user,c=e.state.theme,s=i[n]||"FinTrackr",d=document.createElement("header");d.className="app-header",d.innerHTML=`\n    \x3c!-- –ú–æ–±–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞-–≥–∞–º–±—É—Ä–≥–µ—Ä –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–∞–π–¥–±–∞—Ä–∞ --\x3e\n    <button class="header-hamburger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">\n      <span></span>\n      <span></span>\n      <span></span>\n    </button>\n\n    \x3c!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã --\x3e\n    <div class="header-left">\n      <div class="header-logo">\n        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z" fill="var(--primary-color)"/>\n        </svg>\n        <span class="logo-text">FinTrackr</span>\n      </div>\n      <h1 class="page-title">${s}</h1>\n    </div>\n\n    \x3c!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: —Ç–µ–º–∞ + –ø—Ä–æ—Ñ–∏–ª—å --\x3e\n    <div class="header-right">\n      \x3c!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã --\x3e\n      <button class="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">\n        ${"dark"===c?'<svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke="currentColor" stroke-width="2"/></svg>':'<svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2" fill="none"/></svg>'}\n      </button>\n\n      \x3c!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è --\x3e\n      <div class="header-profile">\n        <button class="profile-button" aria-haspopup="true" aria-expanded="false">\n          <div class="profile-avatar">${r?r.name.charAt(0).toUpperCase():"U"}</div>\n          <span class="profile-name">${r?r.name:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}</span>\n          <svg class="profile-arrow" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" fill="none"/></svg>\n        </button>\n\n        \x3c!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é --\x3e\n        <div class="profile-dropdown" hidden>\n          <div class="profile-dropdown-header">\n            <div class="profile-dropdown-avatar">${r?r.name.charAt(0).toUpperCase():"U"}</div>\n            <div class="profile-dropdown-info">\n              <div class="profile-dropdown-name">${r?r.name:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}</div>\n              <div class="profile-dropdown-email">${r?r.email:""}</div>\n            </div>\n          </div>\n          <div class="profile-dropdown-divider"></div>\n          <a href="/settings.html" class="profile-dropdown-item">\n            <svg viewBox="0 0 24 24"><path d="M12 15a3 3 0 100-6 3 3 0 000 6z" stroke="currentColor" stroke-width="2" fill="none"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="2" fill="none"/></svg>\n            –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n          </a>\n          <button class="profile-dropdown-item profile-logout">\n            <svg viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4m7 14l5-5-5-5m5 5H9" stroke="currentColor" stroke-width="2" fill="none"/></svg>\n            –í—ã–π—Ç–∏\n          </button>\n        </div>\n      </div>\n    </div>\n  `;const m=d.querySelector(".header-hamburger"),u=d.querySelector(".theme-toggle"),p=d.querySelector(".profile-button"),h=d.querySelector(".profile-dropdown"),v=d.querySelector(".profile-logout");return m&&a&&m.addEventListener("click",e=>{e.stopPropagation(),a(),m.classList.toggle("active")}),u&&u.addEventListener("click",()=>{const t="light"===c?"dark":"light";e.state.theme=t,document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fintrackr-theme",t),u.innerHTML="dark"===t?'<svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke="currentColor" stroke-width="2"/></svg>':'<svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2" fill="none"/></svg>',o&&o(t)}),p&&h&&(p.addEventListener("click",e=>{e.stopPropagation();const t="true"===p.getAttribute("aria-expanded");p.setAttribute("aria-expanded",!t),h.hidden=t}),document.addEventListener("click",()=>{p.setAttribute("aria-expanded","false"),h.hidden=!0})),v&&v.addEventListener("click",async()=>{if(l)await l();else try{await fetch("/api/logout",{method:"POST"}),localStorage.removeItem("user"),e.state.user=null,e.state.isAuthenticated=!1,window.location.href="/login.html"}catch(t){}}),d}({pageId:a,...n});if(t){const e=document.getElementById(t);e&&(e.innerHTML="",e.appendChild(l))}else document.body.prepend(l);return l}const m=[{section:"–§–∏–Ω–∞–Ω—Å—ã",items:[{icon:"üìä",label:"–î–∞—à–±–æ—Ä–¥",href:"dashboard.html",id:"dashboard"},{icon:"üíº",label:"–°—á–µ—Ç–∞",href:"accounts.html",id:"accounts"},{icon:"üìù",label:"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",href:"transactions.html",id:"transactions"},{icon:"üìÅ",label:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",href:"categories.html",id:"categories"},{icon:"üìä",label:"–ë—é–¥–∂–µ—Ç—ã",href:"budgets.html",id:"budgets"},{icon:"üéØ",label:"–¶–µ–ª–∏",href:"goals.html",id:"goals"},{icon:"üìÖ",label:"–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ",href:"planned.html",id:"planned"},{icon:"üîÅ",label:"–†–µ–≥—É–ª—è—Ä–Ω—ã–µ",href:"recurring.html",id:"recurring"}]},{section:"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞",items:[{icon:"üìà",label:"–û—Ç—á—ë—Ç—ã",href:"reports.html",id:"reports"},{icon:"üîÆ",label:"–ü—Ä–æ–≥–Ω–æ–∑—ã",href:"forecast.html",id:"forecast"}]},{section:"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã",items:[{icon:"üí±",label:"–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä",href:"converter.html",id:"converter"},{icon:"üîî",label:"–ü–æ–¥–ø–∏—Å–∫–∏",href:"subscriptions.html",id:"subscriptions"},{icon:"ü§ñ",label:"–ü—Ä–∞–≤–∏–ª–∞",href:"rules.html",id:"rules"},{icon:"üîó",label:"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è",href:"sync.html",id:"sync"}]}];function u(){const t=document.querySelector(".sidebar");if(!t)return;const n=t.classList.toggle("sidebar-collapsed");e.state.sidebarCollapsed=n;const a=t.querySelector(".sidebar-toggle");a&&(a.innerHTML=n?"‚Üí":"‚Üê",a.setAttribute("aria-label",n?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é":"–°–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é"));t.querySelectorAll(".nav-link").forEach(e=>{var t;const a=null==(t=e.querySelector(".nav-label"))?void 0:t.textContent;n&&a?(e.setAttribute("title",a),e.setAttribute("data-tooltip",a)):(e.removeAttribute("title"),e.removeAttribute("data-tooltip"))}),localStorage.setItem("sidebarCollapsed",n)}function p(t="sidebar-container",n={}){const a=document.getElementById(t);if(!a)return;const o="true"===localStorage.getItem("sidebarCollapsed");n.collapsed=o;const l=window.location.pathname.split("/").pop().replace(".html","")||"dashboard";n.currentPage=l;const r=function(t={}){const{collapsed:n=e.state.sidebarCollapsed,currentPage:a=e.state.currentPage}=t,o=document.createElement("nav");o.className="sidebar "+(n?"sidebar-collapsed":""),o.setAttribute("role","navigation"),o.setAttribute("aria-label","Main navigation");const l=document.createElement("div");l.className="sidebar-logo",l.innerHTML='\n    <a href="dashboard.html" class="logo-link">\n      <span class="logo-icon">üí∞</span>\n      <span class="logo-text">FinTrackr</span>\n    </a>\n  ',o.appendChild(l);const r=document.createElement("button");r.className="sidebar-toggle",r.setAttribute("aria-label",n?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é":"–°–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é"),r.innerHTML=n?"‚Üí":"‚Üê",r.addEventListener("click",()=>{u()}),o.appendChild(r),m.forEach(e=>{const t=document.createElement("div");t.className="nav-section";const l=document.createElement("h3");l.className="nav-section-title",l.textContent=e.section,t.appendChild(l);const r=document.createElement("ul");r.className="nav-list",e.items.forEach(e=>{const t=document.createElement("li");t.className="nav-item";const o=document.createElement("a");o.href=e.href,o.className="nav-link "+(a===e.id?"active":""),o.setAttribute("data-page",e.id);const l=document.createElement("span");l.className="nav-icon",l.textContent=e.icon;const c=document.createElement("span");c.className="nav-label",c.textContent=e.label,n&&(o.setAttribute("title",e.label),o.setAttribute("data-tooltip",e.label)),o.append(l,c),t.appendChild(o),r.appendChild(t)}),t.appendChild(r),o.appendChild(t)});const c=document.createElement("div");return c.className="sidebar-footer",c.innerHTML=`\n    <a href="settings.html" class="nav-link" ${n?'title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"':""}>\n      <span class="nav-icon">‚öôÔ∏è</span>\n      <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>\n    </a>\n    <a href="education.html" class="nav-link" ${n?'title="–û–±—É—á–µ–Ω–∏–µ"':""}>\n      <span class="nav-icon">üìö</span>\n      <span class="nav-label">–û–±—É—á–µ–Ω–∏–µ</span>\n    </a>\n  `,o.appendChild(c),o}(n);a.appendChild(r),function(){const t=window.matchMedia("(max-width: 1200px)");function n(t){const n=document.querySelector(".sidebar");if(n)if(t.matches)n.classList.add("sidebar-collapsed"),e.state.sidebarCollapsed=!0;else{const t="true"===localStorage.getItem("sidebarCollapsed");n.classList.toggle("sidebar-collapsed",t),e.state.sidebarCollapsed=t}}t.addEventListener("change",n),n(t)}()}function h(t={}){const{contentId:n="main-content",showHeader:a=!0,showSidebar:o=!0,onReady:l=null}=t;if("loading"===document.readyState)throw new Error("Layout –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DOMContentLoaded.");let r=document.querySelector(".app-container");r||(r=document.createElement("div"),r.className="app-container",document.body.appendChild(r)),r.innerHTML=`\n    ${o?'<div id="sidebar-container"></div>':""}\n    <div class="app-main">\n      ${a?'<div id="header-container"></div>':""}\n      <main class="app-content" id="${n}">\n        \x3c!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç –∑–¥–µ—Å—å --\x3e\n        <div class="content-loader">\n          <div class="loader"></div>\n          <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>\n        </div>\n      </main>\n    </div>\n  `;let c=null,s=null;o&&(s=p("sidebar-container",{})),a&&(c=d("header-container",{onToggleSidebar:()=>{u(),document.body.classList.toggle("sidebar-open")},onThemeToggle:e=>{}}));const i=e=>{window.innerWidth<900&&!e.target.closest(".sidebar")&&!e.target.closest(".header-hamburger")&&document.body.classList.contains("sidebar-open")&&(u(),document.body.classList.remove("sidebar-open"))};return document.addEventListener("click",i),setTimeout(()=>{const e=document.querySelector(".content-loader");e&&(e.style.opacity="0",setTimeout(()=>e.remove(),300)),l&&l()},100),{header:c,sidebar:s,contentContainer:document.getElementById(n),showLoader(){const t=document.getElementById(n);t&&(t.classList.add("loading"),e.state.isLoading=!0)},hideLoader(){const t=document.getElementById(n);t&&(t.classList.remove("loading"),e.state.isLoading=!1)},setContent(e){const t=document.getElementById(n);t&&("string"==typeof e?t.innerHTML=e:(t.innerHTML="",t.appendChild(e)))},destroy(){document.removeEventListener("click",i),r&&r.remove()}}}function v(e,n,a={}){const o=document.getElementById(n);if(o){if(o.innerHTML="",!e||0===e.length){const e=document.createElement("div");return e.className="empty-state",e.innerHTML='\n      <p class="empty-icon">üíº</p>\n      <p class="empty-title">–ù–µ—Ç —Å—á–µ—Ç–æ–≤</p>\n      <p class="empty-text">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å—á—ë—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤</p>\n    ',void o.appendChild(e)}e.forEach(e=>{const n=function(e,n={}){const{onEdit:a=null,onDelete:o=null,showActions:l=!0}=n,r=document.createElement("div");r.className="wallet-card",r.setAttribute("data-account-id",e.id);const c=document.createElement("div");c.className="wallet-header";const s=document.createElement("div");s.className="wallet-icon",s.textContent=e.icon||"üíº";const i=document.createElement("div");i.className="wallet-info";const d=document.createElement("div");d.className="wallet-name",d.textContent=e.name;const m=document.createElement("div");m.className="wallet-type",m.textContent=e.type||"–û—Å–Ω–æ–≤–Ω–æ–π",i.append(d,m),c.append(s,i);const u=document.createElement("div");if(u.className="wallet-balance",u.innerHTML=`\n    ${t(e.balance,e.currency)}\n    <span class="currency">${e.currency}</span>\n  `,l){const t=document.createElement("div");if(t.className="wallet-actions",a){const n=document.createElement("button");n.className="btn-icon",n.title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",n.innerHTML="‚úèÔ∏è",n.addEventListener("click",t=>{t.stopPropagation(),a(e)}),t.appendChild(n)}if(o){const n=document.createElement("button");n.className="btn-icon",n.title="–£–¥–∞–ª–∏—Ç—å",n.innerHTML="üóëÔ∏è",n.addEventListener("click",t=>{t.stopPropagation(),o(e)}),t.appendChild(n)}r.appendChild(t)}return r.append(c,u),r.addEventListener("mouseenter",()=>{r.style.transform="translateY(-2px)"}),r.addEventListener("mouseleave",()=>{r.style.transform="translateY(0)"}),r}(e,a);o.appendChild(n)})}}const b={required:e=>Array.isArray(e)?e.length>0:"string"==typeof e?e.trim().length>0:null!=e,email:e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),min:(e,t)=>"number"==typeof e?e>=t:"string"!=typeof e||e.length>=t,max:(e,t)=>"number"==typeof e?e<=t:"string"!=typeof e||e.length<=t,minLength:(e,t)=>!e||e.length>=t,maxLength:(e,t)=>!e||e.length<=t,pattern:(e,t)=>{if(!e)return!0;return("string"==typeof t?new RegExp(t):t).test(e)},numeric:e=>!e||/^\d+$/.test(e),alphanumeric:e=>!e||/^[a-zA-Z0-9]+$/.test(e)},f={required:"–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è",email:"–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email",min:e=>`–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${e}`,max:e=>`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${e}`,minLength:e=>`–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: ${e} —Å–∏–º–≤–æ–ª–æ–≤`,maxLength:e=>`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: ${e} —Å–∏–º–≤–æ–ª–æ–≤`,pattern:"–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç",numeric:"–¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã",alphanumeric:"–¢–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã"};function g(e,t={}){var n;const a=e.querySelector("input, select, textarea");if(!a)return{valid:!0,errors:[]};const o="checkbox"===a.type?a.checked:"radio"===a.type?(null==(n=e.querySelector('input[type="radio"]:checked'))?void 0:n.value)||"":a.value,l=[];return Object.entries(t).forEach(([e,t])=>{if("custom"===e){const e=t(o);return void(!0!==e&&l.push("string"==typeof e?e:"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"))}const n=b[e];if(!n)return;if(!n(o,t)){const n=f[e];l.push("function"==typeof n?n(t):n)}}),{valid:0===l.length,errors:l}}function y(e,t){const n=e.querySelector(".form-error"),a=e.querySelector("input, select, textarea");t.length>0?(n.textContent=t[0],n.style.display="block",e.classList.add("form-field--error"),a&&a.classList.add("form-input--error")):(n.style.display="none",e.classList.remove("form-field--error"),a&&a.classList.remove("form-input--error"))}function E(e){const{fields:t=[],onSubmit:n=null,submitLabel:a="–û—Ç–ø—Ä–∞–≤–∏—Ç—å",cancelLabel:o=null,onCancel:l=null,validateOnBlur:r=!0,validateOnChange:c=!1,showSubmitButton:s=!0}=e,i=document.createElement("form");i.className="form-base",i.noValidate=!0;const d=new Map;if(t.forEach(e=>{const t=function(e){const{name:t,type:n="text",label:a,placeholder:o="",value:l="",options:r=[],validation:c={},disabled:s=!1,readonly:i=!1,autofocus:d=!1,hint:m=""}=e,u=document.createElement("div");if(u.className="form-field",u.setAttribute("data-field",t),a){const e=document.createElement("label");e.className="form-label",e.setAttribute("for",t),e.textContent=a,c.required&&(e.innerHTML+=' <span class="form-required">*</span>'),u.appendChild(e)}let p;switch(n){case"textarea":p=document.createElement("textarea"),p.className="form-textarea",p.rows=4;break;case"select":if(p=document.createElement("select"),p.className="form-select",o){const e=document.createElement("option");e.value="",e.textContent=o,e.disabled=!0,e.selected=!l,p.appendChild(e)}r.forEach(e=>{const t=document.createElement("option");t.value="object"==typeof e?e.value:e,t.textContent="object"==typeof e?e.label:e,t.value===l&&(t.selected=!0),p.appendChild(t)});break;case"checkbox":document.createElement("div").className="form-checkbox-wrapper",p=document.createElement("input"),p.type="checkbox",p.className="form-checkbox",p.checked=!!l;const e=document.createElement("label");e.className="form-checkbox-label",e.appendChild(p),e.appendChild(document.createTextNode(a||"")),u.innerHTML="",u.appendChild(e);break;case"radio":const c=document.createElement("div");c.className="form-radio-group",r.forEach(e=>{const n=document.createElement("div");n.className="form-radio-wrapper";const a=document.createElement("input");a.type="radio",a.name=t,a.value="object"==typeof e?e.value:e,a.className="form-radio",a.checked=a.value===l;const o=document.createElement("label");o.className="form-radio-label",o.appendChild(a),o.appendChild(document.createTextNode("object"==typeof e?e.label:e)),n.appendChild(o),c.appendChild(n)}),u.appendChild(c),p=c;break;default:p=document.createElement("input"),p.type=n,p.className="form-input",o&&(p.placeholder=o),l&&(p.value=l)}if("DIV"!==p.tagName&&(p.id=t,p.name=t,s&&(p.disabled=!0),i&&(p.readOnly=!0),d&&(p.autofocus=!0),"checkbox"!==n&&"radio"!==n&&u.appendChild(p)),m){const e=document.createElement("div");e.className="form-hint",e.textContent=m,u.appendChild(e)}const h=document.createElement("div");return h.className="form-error",h.style.display="none",u.appendChild(h),u}(e);if(i.appendChild(t),d.set(e.name,e),r){const n=t.querySelector("input, select, textarea");n&&n.addEventListener("blur",()=>{const n=g(t,e.validation);y(t,n.errors)})}if(c){const n=t.querySelector("input, select, textarea");n&&n.addEventListener("input",()=>{const n=g(t,e.validation);y(t,n.errors)})}}),s||o){const e=document.createElement("div");if(e.className="form-buttons",o){const t=document.createElement("button");t.type="button",t.className="btn btn--secondary",t.textContent=o,t.addEventListener("click",()=>{l&&l()}),e.appendChild(t)}if(s){const t=document.createElement("button");t.type="submit",t.className="btn btn--primary",t.textContent=a,e.appendChild(t)}i.appendChild(e)}return i.addEventListener("submit",async e=>{e.preventDefault();let o=!0;const l={};if(t.forEach(e=>{var t;const n=i.querySelector(`[data-field="${e.name}"]`),a=g(n,e.validation);y(n,a.errors),a.valid||(o=!1);const r=n.querySelector("input, select, textarea");r&&("checkbox"===r.type?l[e.name]=r.checked:"radio"===r.type?l[e.name]=(null==(t=n.querySelector('input[type="radio"]:checked'))?void 0:t.value)||"":l[e.name]=r.value)}),!o){const e=i.querySelector(".form-field--error");if(e){const t=e.querySelector("input, select, textarea");t&&t.focus()}return}if(n){const e=i.querySelector('button[type="submit"]');e&&(e.disabled=!0,e.textContent="–û—Ç–ø—Ä–∞–≤–∫–∞...");try{await n(l)}catch(r){}finally{e&&(e.disabled=!1,e.textContent=a)}}}),i}let C=[];function w(){const t=document.createElement("div"),a=E({fields:[{name:"name",type:"text",label:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞",validation:{required:!0,minLength:2,maxLength:50}},{name:"currency",type:"select",label:"–í–∞–ª—é—Ç–∞",options:[{value:"USD",label:"USD ‚Äî –î–æ–ª–ª–∞—Ä –°–®–ê"},{value:"EUR",label:"EUR ‚Äî –ï–≤—Ä–æ"},{value:"PLN",label:"PLN ‚Äî –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π"},{value:"RUB",label:"RUB ‚Äî –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å"}],validation:{required:!0}},{name:"balance",type:"number",label:"–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å",placeholder:"0.00",value:"0",validation:{numeric:!0,min:-1e6,max:1e9}}],submitLabel:"–°–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç",onSubmit:async(t,n)=>{try{const n=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,currency:t.currency,balance:parseFloat(t.balance)||0})});if(!n.ok){const e=await n.json();return void o(e.error||"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç")}const a=await n.json();C.push(a),e.accounts=C;const c=document.getElementById("accountsGrid");c&&(c.innerHTML="",c.appendChild(v(C,{onEdit:L,onDelete:x}))),l("–°—á—ë—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"),r.close()}catch(a){o("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—á—ë—Ç–∞")}}});t.appendChild(a);const r=n({title:"–î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç",content:t,size:"md",actions:[{label:"–û—Ç–º–µ–Ω–∞",variant:"secondary",onClick:e=>e()}]})}async function L(t){const a=C.find(e=>e.id===t);if(!a)return void o("–°—á—ë—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω");const r=document.createElement("div"),c=E({fields:[{name:"name",type:"text",label:"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞",value:a.name,validation:{required:!0,minLength:2,maxLength:50}},{name:"currency",type:"select",label:"–í–∞–ª—é—Ç–∞",value:a.currency,options:[{value:"USD",label:"USD ‚Äî –î–æ–ª–ª–∞—Ä –°–®–ê"},{value:"EUR",label:"EUR ‚Äî –ï–≤—Ä–æ"},{value:"PLN",label:"PLN ‚Äî –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π"},{value:"RUB",label:"RUB ‚Äî –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å"}],validation:{required:!0}},{name:"balance",type:"number",label:"–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å",value:a.balance.toString(),validation:{numeric:!0,min:-1e6,max:1e9}}],submitLabel:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è",onSubmit:async n=>{try{const a=await fetch(`/api/accounts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,currency:n.currency,balance:parseFloat(n.balance)})});if(!a.ok){const e=await a.json();return void o(e.error||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç")}const r=await a.json(),c=C.findIndex(e=>e.id===t);-1!==c&&(C[c]=r,e.accounts=C);const i=document.getElementById("accountsGrid");i&&(i.innerHTML="",i.appendChild(v(C,{onEdit:L,onDelete:x}))),l("–°—á—ë—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω!"),s.close()}catch(a){o("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—á—ë—Ç–∞")}}});r.appendChild(c);const s=n({title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—á—ë—Ç",content:r,size:"md",actions:[{label:"–û—Ç–º–µ–Ω–∞",variant:"secondary",onClick:e=>e()}]})}async function x(t){const n=C.find(e=>e.id===t);if(!n)return void o("–°—á—ë—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω");if(await a({title:"–£–¥–∞–ª–∏—Ç—å —Å—á—ë—Ç?",message:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—á—ë—Ç "${n.name}"? –í—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –±–µ–∑ —Å—á—ë—Ç–∞.`,danger:!0}))try{const n=await fetch(`/api/accounts/${t}`,{method:"DELETE"});if(!n.ok){const e=await n.json();return void o(e.error||"–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å—á—ë—Ç")}C=C.filter(e=>e.id!==t),e.accounts=C;const a=document.getElementById("accountsGrid");a&&(a.innerHTML="",a.appendChild(v(C,{onEdit:L,onDelete:x}))),l("–°—á—ë—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω")}catch(r){o("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—á—ë—Ç–∞")}}async function k(){await function(e={}){return"loading"===document.readyState?new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>{t(h(e))})}):h(e)}({contentId:"accounts-content",showHeader:!0,showSidebar:!0,onReady:async()=>{await async function(){const t=document.getElementById("accountsGrid");if(t){r(t,c(3));try{const n=await fetch("/api/accounts");if(!n.ok)throw new Error("Failed to load accounts");C=await n.json(),e.accounts=C,s(t,v(C,{onEdit:L,onDelete:x}))}catch(n){s(t,'<p class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—á–µ—Ç–æ–≤</p>'),o("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—á–µ—Ç–∞")}}}();const t=document.getElementById("addAccountBtn");t&&t.addEventListener("click",w);const n=document.getElementById("accountSearch"),a=document.getElementById("accountCurrencyFilter"),l=()=>{const e=(null==n?void 0:n.value.toLowerCase())||"",t=(null==a?void 0:a.value)||"",o=C.filter(n=>{const a=n.name.toLowerCase().includes(e),o=!t||n.currency===t;return a&&o}),l=document.getElementById("accountsGrid");l&&(l.innerHTML="",l.appendChild(v(o,{onEdit:L,onDelete:x})))};null==n||n.addEventListener("input",l),null==a||a.addEventListener("change",l)}})}"loading"!==document.readyState?k():document.addEventListener("DOMContentLoaded",k);
