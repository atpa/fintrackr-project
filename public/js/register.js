import{i as h,p,A as c}from"./profile-DStBtrFs.js";h({requireAuth:!1});async function u(){const a=document.getElementById("registerForm");a&&a.addEventListener("submit",async f=>{var s,o,i,l,d,m;f.preventDefault();const n=(o=(s=document.getElementById("regName"))==null?void 0:s.value)==null?void 0:o.trim(),r=(l=(i=document.getElementById("regEmail"))==null?void 0:i.value)==null?void 0:l.trim(),t=(d=document.getElementById("regPassword"))==null?void 0:d.value,g=(m=document.getElementById("regConfirm"))==null?void 0:m.value;if(!n||!r||!t){alert("Fill in name, email, and password.");return}if(t!==g){alert("Passwords do not match.");return}try{const e=await p("/api/register",{name:n,email:r,password:t},{csrf:!1}),y=(e==null?void 0:e.user)||e;if(!c.login(y)){alert("Failed to save session data.");return}await c.syncSession(!0).catch(()=>null),window.location.href="dashboard.html"}catch(e){alert(e.message||"Registration failed.")}})}document.readyState!=="loading"?u():document.addEventListener("DOMContentLoaded",u);
