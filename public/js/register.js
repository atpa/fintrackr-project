import{i as m,A as u}from"./profile-BEROGLl0.js";m({requireAuth:!1});async function o(){const t=document.getElementById("registerForm");t&&t.addEventListener("submit",async a=>{a.preventDefault();const i=document.getElementById("regName").value.trim(),s=document.getElementById("regEmail").value.trim(),r=document.getElementById("regPassword").value,c=document.getElementById("regConfirm").value;if(r!==c){alert("Пароли не совпадают");return}const d={name:i,email:s,password:r};try{const e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!e.ok){const l=await e.json().catch(()=>({}));alert("Ошибка регистрации: "+(l.error||e.statusText));return}const n=await e.json();u.login(n.user||n)?window.location.href="dashboard.html":alert("Ошибка сохранения данных")}catch(e){console.error(e),alert("Ошибка сети")}})}document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o);
