async function t(e,s={},n=2){try{return await async function(t,e={}){const s={headers:{"Content-Type":"application/json",...e.headers},...e};try{const e=new AbortController,n=setTimeout(()=>e.abort(),1e4),a=await fetch(`/api${t}`,{...s,signal:e.signal});if(clearTimeout(n),!a.ok){const t=await a.json().catch(()=>({error:"Unknown error"}));throw new Error(t.error||`HTTP ${a.status}`)}return await a.json()}catch(n){if("AbortError"===n.name)throw new Error("Request timeout");throw n}}(e,s)}catch(a){if(n>0&&"Request timeout"!==a.message)return await new Promise(t=>setTimeout(t,1e3)),t(e,s,n-1);throw a}}const e={transactions:{async getAll(e={}){const s=new URLSearchParams;Object.entries(e).forEach(([t,e])=>{null!=e&&s.append(t,e)});return t(`/transactions${s.toString()?`?${s}`:""}`)},getById:async e=>t(`/transactions/${e}`),create:async e=>t("/transactions",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/transactions/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/transactions/${e}`,{method:"DELETE"})},accounts:{getAll:async()=>t("/accounts"),getById:async e=>t(`/accounts/${e}`),create:async e=>t("/accounts",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/accounts/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/accounts/${e}`,{method:"DELETE"})},categories:{getAll:async()=>t("/categories"),getById:async e=>t(`/categories/${e}`),create:async e=>t("/categories",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/categories/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/categories/${e}`,{method:"DELETE"})},budgets:{getAll:async()=>t("/budgets"),getById:async e=>t(`/budgets/${e}`),create:async e=>t("/budgets",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/budgets/${e}`,{method:"DELETE"})},goals:{getAll:async()=>t("/goals"),getById:async e=>t(`/goals/${e}`),create:async e=>t("/goals",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/goals/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/goals/${e}`,{method:"DELETE"})},subscriptions:{getAll:async()=>t("/subscriptions"),getById:async e=>t(`/subscriptions/${e}`),create:async e=>t("/subscriptions",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/subscriptions/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/subscriptions/${e}`,{method:"DELETE"})},planned:{getAll:async()=>t("/planned"),getById:async e=>t(`/planned/${e}`),create:async e=>t("/planned",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/planned/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/planned/${e}`,{method:"DELETE"})},rules:{getAll:async()=>t("/rules"),getById:async e=>t(`/rules/${e}`),create:async e=>t("/rules",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>t(`/rules/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>t(`/rules/${e}`,{method:"DELETE"})},sync:{getBanks:async()=>t("/banks"),getConnections:async()=>t("/sync/connections"),connect:async e=>t("/sync/connect",{method:"POST",body:JSON.stringify(e)}),syncTransactions:async e=>t("/sync/transactions",{method:"POST",body:JSON.stringify({connection_id:e})})},utils:{convertCurrency:async(e,s,n)=>t(`/convert?${new URLSearchParams({from:s,to:n,amt:e})}`),getRates:async(e,s)=>t(`/rates?${new URLSearchParams({base:e,quote:s})}`),getForecast:async()=>t("/forecast")}};export{e as A};
