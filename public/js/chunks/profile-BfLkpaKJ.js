const e={USER_KEY:"user",THEME_KEY:"ft_theme",isLoggedIn(){try{return!!localStorage.getItem(this.USER_KEY)}catch(e){return!1}},getUser(){try{const e=localStorage.getItem(this.USER_KEY);return e?JSON.parse(e):null}catch(e){return null}},login(e){try{return!(!e||!e.email)&&(localStorage.setItem(this.USER_KEY,JSON.stringify(e)),!0)}catch(t){return!1}},logout(){try{return localStorage.removeItem(this.USER_KEY),!0}catch(e){return!1}},requiresAuth:e=>!["landing.html","index.html","login.html","register.html","features.html","benefits.html","about.html"].includes(e.toLowerCase()),redirectIfNotAuthenticated(){const e=window.location.pathname.split("/").pop().toLowerCase()||"index.html";this.requiresAuth(e)&&!this.isLoggedIn()&&(window.location.href="login.html")},getTheme(){try{return localStorage.getItem(this.THEME_KEY)||"light"}catch(e){return"light"}},setTheme(e){try{localStorage.setItem(this.THEME_KEY,e)}catch(t){}}},t=new Set(["landing.html","index.html","login.html","register.html","features.html","benefits.html","about.html","premium.html","education.html"]);function n({requireAuth:n=!0,loginPath:r="login.html",logoutRedirect:l="landing.html",publicPages:o=t}={}){const i=(window.location.pathname.split("/").pop()||"index.html").toLowerCase(),c=o.has(i);if(n&&!c&&!e.isLoggedIn())return void(window.location.href=r);const a=e.getUser();!function(e){const t=document.querySelector(".profile-name"),n=document.querySelector(".profile-email");t&&(t.textContent=(null==e?void 0:e.name)||"Пользователь"),n&&(n.textContent=(null==e?void 0:e.email)||"")}(a),function(t,n){const r=document.querySelector(".login-link"),l=document.querySelector(".register-link"),o=document.querySelector(".logout-link");t?(r&&(r.style.display="none"),l&&(l.style.display="none"),o&&(o.style.display="inline-block",o.addEventListener("click",t=>{t.preventDefault(),e.logout(),window.location.href=n},{once:!0}))):(o&&(o.style.display="none"),r&&(r.style.display="inline-block"),l&&(l.style.display="inline-block"))}(a,l)}function r(e={}){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>n(e),{once:!0}):n(e)}function l(e="settings"){try{const t=localStorage.getItem(e);return t?JSON.parse(t):{}}catch(t){return{}}}function o(e,t="settings"){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(n){return!1}}function i({settings:t={},nameInput:n=document.getElementById("profileName"),currencySelect:r=document.getElementById("profileCurrency"),timezoneSelect:l=document.getElementById("profileTimezone"),reportCurrencySelect:o=document.getElementById("reportCurrencySelect"),balanceCurrencySelect:i=document.getElementById("balanceCurrencySelect")}={}){const c=e.getUser()||{};n&&(n.value=t.name||c.name||""),r&&(r.value=t.currency||"USD"),l&&(l.value=t.timezone||"Europe/Warsaw"),o&&(o.value=t.reportCurrency||t.currency||"USD"),i&&(i.value=t.balanceCurrency||t.currency||"USD")}export{e as A,i as a,r as i,l,o as s};
