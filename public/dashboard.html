<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="FinTrackr - Personal Finance Tracker Dashboard" />
    <meta name="theme-color" content="#16213e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="FinTrackr" />
    <title>FinTrackr ‚Äì –î—ç—à–±–æ—Ä–¥</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/icon-192.png" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/layout-components.css" />
  </head>
  <body>
    <!-- Layout –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
    <div id="app-root">
      <main class="workspace-main" id="main-content">
      <section class="alert-banner alert-banner--info" aria-live="polite">
        <div>
          <p class="alert-banner-title">AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</p>
          <p class="alert-banner-text">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –±—é–¥–∂–µ—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ —ç–∫–æ–Ω–æ–º–∏–∏.</p>
        </div>
        <button class="btn-secondary btn-pill" onclick="location.href='budgets.html'">–°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç</button>
      </section>

      <section class="stats-grid">
        <article class="stat-card stat-card--balance">
          <div class="stat-card-label">–ë–∞–ª–∞–Ω—Å</div>
          <div class="stat-card-value">
            <strong id="totalBalance">0.00</strong>
            <span class="currency-code">USD</span>
          </div>
          <p class="stat-card-note">–ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –≤—Å–µ–º —Å—á–µ—Ç–∞–º</p>
        </article>
        <article class="stat-card stat-card--income">
          <div class="stat-card-label">–°—É–º–º–∞ –¥–æ—Ö–æ–¥–æ–≤</div>
          <div class="stat-card-value">
            <strong id="totalIncome">0.00</strong>
            <span class="currency-code">USD</span>
          </div>
          <p class="stat-card-note">–û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</p>
        </article>
        <article class="stat-card stat-card--expense">
          <div class="stat-card-label">–°—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</div>
          <div class="stat-card-value">
            <strong id="totalExpense">0.00</strong>
            <span class="currency-code">USD</span>
          </div>
          <p class="stat-card-note">–í–∫–ª—é—á–∞—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</p>
        </article>
        <article class="stat-card stat-card--neutral">
          <div class="stat-card-label">–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ</div>
          <div class="stat-card-value">
            <strong id="financialHealth">0%</strong>
          </div>
          <div class="progress-bar">
            <div id="healthProgress" class="progress" style="width:0%"></div>
          </div>
        </article>
      </section>

      <section class="panel-grid">
        <article class="card card--wide">
          <div class="card-header">
            <div>
              <h2>–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
              <p class="card-subtitle">–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ</p>
            </div>
            <button class="btn-secondary btn-pill">–≠–∫—Å–ø–æ—Ä—Ç</button>
          </div>
          <div class="chart-container">
            <canvas
              id="expenseChart"
              width="600"
              height="300"
              aria-label="–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤"
              role="img"
            ></canvas>
          </div>
        </article>

        <article class="card card--wide">
          <div class="card-header">
            <div>
              <h2>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
              <p class="card-subtitle">–£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—è–Ω—É—Ç –±—é–¥–∂–µ—Ç –≤–Ω–∏–∑</p>
            </div>
            <a class="link-ghost" href="categories.html">–£–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ ‚Üí</a>
          </div>
          <div class="chart-container chart-container--split">
            <canvas
              id="expensePie"
              width="300"
              height="300"
              aria-label="–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤"
              role="img"
            ></canvas>
            <div class="top-list">
              <h3>–¢–æ–ø —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
              <ul id="topCategories" class="list-compact">
                <li>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</li>
              </ul>
            </div>
          </div>
        </article>
      </section>

      <section class="panel-grid">
        <article class="card card--wide">
          <div class="card-header">
            <div>
              <h2>Cashflow (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤)</h2>
              <p class="card-subtitle">–î–∏–Ω–∞–º–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</p>
            </div>
            <button class="btn-secondary btn-pill">–î–µ—Ç–∞–ª–∏ ‚Üí</button>
          </div>
          <div class="chart-container">
            <canvas
              id="cashflowChart"
              width="600"
              height="300"
              aria-label="–ì—Ä–∞—Ñ–∏–∫ cashflow"
              role="img"
            ></canvas>
          </div>
        </article>
      </section>

      <section class="insight-grid">
        <article class="card">
          <div class="card-header">
            <div>
              <h2>AI-–ø—Ä–æ–≥–Ω–æ–∑ (30 –¥–Ω–µ–π)</h2>
              <p class="card-subtitle">–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –≤ –≤–∞–ª—é—Ç–µ –±–∞–ª–∞–Ω—Å–∞</p>
            </div>
            <span class="pill pill--accent">Beta</span>
          </div>
          <div class="ai-grid">
            <div>
              <p class="muted-label">–î–æ—Ö–æ–¥</p>
              <p class="ai-value">
                <strong id="aiIncome">0.00</strong>
                <span class="currency-code">USD</span>
              </p>
            </div>
            <div>
              <p class="muted-label">–†–∞—Å—Ö–æ–¥</p>
              <p class="ai-value">
                <strong id="aiExpense">0.00</strong>
                <span class="currency-code">USD</span>
              </p>
            </div>
          </div>
          <p class="card-note">–ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–µ–Ω–¥—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —É–≤–µ–¥–æ–º–∏—Ç, –µ—Å–ª–∏ —Ç—Ä–∞—Ç—ã –≤—ã—Ö–æ–¥—è—Ç –∑–∞ —Ä–∞–º–∫–∏ –±—é–¥–∂–µ—Ç–∞.</p>
        </article>

        <article class="card">
          <div class="card-header">
            <div>
              <h2>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</h2>
              <p class="card-subtitle">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å–≤—è–∑–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Å–∞–π—Ç–æ–≤</p>
            </div>
          </div>
          <ul class="list-reminders">
            <li>
              <span class="pill pill--warning">–°—á–µ—Ç–∞</span>
              <div>
                <p class="reminder-title">–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –±—é–¥–∂–µ—Ç</p>
                <p class="reminder-meta">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç AI —Ç–æ—á–Ω–µ–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ç—ã.</p>
              </div>
              <button class="link-ghost" onclick="location.href='budgets.html'">–û—Ç–∫—Ä—ã—Ç—å</button>
            </li>
            <li>
              <span class="pill pill--neutral">–¶–µ–ª–∏</span>
              <div>
                <p class="reminder-title">–ù–∞–∑–Ω–∞—á—å—Ç–µ —Ü–µ–ª—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π</p>
                <p class="reminder-meta">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –ø—Ä—è–º–æ –≤ –¥—ç—à–±–æ—Ä–¥–µ.</p>
              </div>
              <button class="link-ghost" onclick="location.href='goals.html'">–°–æ–∑–¥–∞—Ç—å</button>
            </li>
          </ul>
        </article>
      </section>
      </main>
    </div>

    <!-- PWA Install Button (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏) -->
    <button id="install-button" class="btn-primary" style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
      üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    </button>

    <!-- Network Status Indicator -->
    <div id="network-status" class="network-status" style="display: none;"></div>

    <footer>
      <p>&copy; 2025 FinTrackr. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <!-- PWA Registration -->
    <script type="module">
      import { initPWA } from './js/pwa.js';
      initPWA();
    </script>

    <!-- New Architecture: ES6 Modules -->
    <script type="module">
      import { initLayout } from './js/layout.js';
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Layout —Å Header + Sidebar
      document.addEventListener('DOMContentLoaded', async () => {
        const layout = await initLayout({
          contentId: 'main-content',
          showHeader: true,
          showSidebar: true,
          onReady: () => {
            console.log('‚úÖ Dashboard layout –≥–æ—Ç–æ–≤');
            // TODO: –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è dashboard
          }
        });
      });
    </script>
  </body>
</html>
